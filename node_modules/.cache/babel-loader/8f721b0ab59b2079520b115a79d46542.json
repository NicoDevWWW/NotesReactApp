{"ast":null,"code":"/**\n * @author Nicolas SQUEREN <nicosqueren@gmail.fr>\n * @copyright Copyright (c) 2020 Moulinroty (https://www.moulinroty.com)\n * @link https://www.moulinroty.com\n */\nconst URL = 'https://api.myidea.fr/v1/';\nvar globalparams = {\n  cache: 'default',\n  headers: {\n    'Content-Type': 'application/json; charset=UTF-8'\n  }\n};\nexport function getNotes() {\n  return new Promise((resolve, reject) => {\n    window.fetch(URL + 'notes').then(response => response.json()).then(result => {\n      console.log('Réponse API getNotes', result);\n      resolve(result);\n    }).catch(error => {\n      console.error(error);\n      reject(error);\n    });\n  });\n}\nexport function createNote(note) {\n  return new Promise((resolve, reject) => {\n    if (note.title && note.description) {\n      var body = {\n        title: note.title,\n        description: note.description\n      };\n      var params = {\n        method: 'POST',\n        mode: 'cors',\n        ...globalparams,\n        body: JSON.stringify(body)\n      };\n      fetch('https://api.myidea.fr/v1/notes', params).then(response => {\n        console.log(response);\n        resolve();\n        setTimeout(window.location.reload(), 200);\n      }).catch(error => reject(error));\n    } else {\n      reject('Informations manquantes');\n    }\n  });\n}\nexport function DeleteNote(id) {\n  const params = { ...globalparams,\n    method: 'DELETE'\n  };\n  return new Promise((resolve, reject) => {\n    fetch(URL + \"notes/\" + id, params).then(response => {\n      console.log(response);\n      resolve();\n      setTimeout(window.location.reload(), 200);\n    }).catch(error => reject(error));\n  });\n}\nexport function updateNote(note) {\n  return new Promise((resolve, reject) => {\n    if (note) {\n      var noteId = note.id;\n      delete note.id;\n      var body = {\n        title: note.title,\n        description: note.description\n      };\n      var params = { ...globalparams,\n        method: 'PATCH',\n        body: JSON.stringify(body)\n      };\n      return new Promise((resolve, reject) => {\n        fetch(URL + \"notes/\" + noteId, params).then(response => {\n          console.log(response);\n          resolve();\n          setTimeout(window.location.reload(), 200);\n        }).catch(error => reject(error));\n      });\n    } else {\n      reject('Note manquante');\n    }\n  });\n}\nexport function FavoriteNote(note) {\n  return new Promise((resolve, reject) => {\n    if (note) {\n      var noteId = note.id;\n      var body = {\n        isFavorite: note.isFavorite\n      };\n      var params = { ...globalparams,\n        method: 'PATCH',\n        mode: 'cors',\n        body: JSON.stringify(body)\n      };\n      return new Promise((resolve, reject) => {\n        fetch(URL + \"notes/\" + noteId, params).then(response => {\n          console.log(response);\n          console.log(note); // setTimeout(window.location.reload(), 200)\n        }).catch(error => reject(error));\n      });\n    } else {\n      reject('Note manquante');\n    }\n  });\n}","map":{"version":3,"sources":["/home/nicolas/Documents/_Digitalschool/ReactApp/NotesReactApp/src/service/Api.js"],"names":["URL","globalparams","cache","headers","getNotes","Promise","resolve","reject","window","fetch","then","response","json","result","console","log","catch","error","createNote","note","title","description","body","params","method","mode","JSON","stringify","setTimeout","location","reload","DeleteNote","id","updateNote","noteId","FavoriteNote","isFavorite"],"mappings":"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","sourcesContent":["/**\n * @author Nicolas SQUEREN <nicosqueren@gmail.fr>\n * @copyright Copyright (c) 2020 Moulinroty (https://www.moulinroty.com)\n * @link https://www.moulinroty.com\n */\nconst URL = 'https://api.myidea.fr/v1/'\nvar globalparams = {\n\tcache: 'default',\n\theaders: {\n\t\t'Content-Type': 'application/json; charset=UTF-8'\n\t}\n}\nexport function getNotes () {\n\treturn new Promise((resolve, reject) => {\n\t\twindow.fetch(URL + 'notes')\n\t\t\t.then((response) => response.json())\n\t\t\t.then((result) => {\n\t\t\t\tconsole.log('Réponse API getNotes', result)\n\t\t\t\tresolve(result)\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error)\n\t\t\t\treject(error)\n\t\t\t})\n\t})\n}\n\nexport function createNote(note){\n\treturn new Promise((resolve, reject) => {\n\t\tif (note.title && note.description){\n\t\t\tvar body = {\n\t\t\t\ttitle : note.title,\n\t\t\t\tdescription: note.description\n\t\t\t}\n\t\t\tvar params = { method: 'POST',\n\t\t\t\tmode: 'cors',\n\t\t\t\t...globalparams,\n\t\t\t\tbody: JSON.stringify(body)\n\t\t\t};\n\t\t\tfetch('https://api.myidea.fr/v1/notes', params)\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tresolve()\n\t\t\t\t\tsetTimeout(window.location.reload(), 200)\n\t\t\t\t})\n\t\t\t\t.catch(error => reject(error))\n\t\t}else{\n\t\t\treject('Informations manquantes')\n\t\t}\n\t})\n}\n\nexport function DeleteNote (id){\n\tconst params = {\n\t\t...globalparams,\n\t\tmethod: 'DELETE'\n\n\t};\n\treturn new Promise((resolve, reject) => {\n\t\t\tfetch(URL + \"notes/\" + id, params)\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tresolve()\n\t\t\t\t\tsetTimeout(window.location.reload(), 200)\n\t\t\t\t})\n\t\t\t\t.catch(error => reject(error))\n\t})\n}\n\nexport function updateNote (note){\n\treturn new Promise((resolve, reject) => {\n\t\tif (note){\n\t\t\tvar noteId = note.id\n\t\t\tdelete note.id\n\t\t\tvar body = {\n\t\t\t\ttitle: note.title,\n\t\t\t\tdescription: note.description\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\t...globalparams,\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\tbody: JSON.stringify(body)\n\t\t\t}\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfetch(URL + \"notes/\" + noteId, params)\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t\tsetTimeout(window.location.reload(), 200)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => reject(error))\n\t\t\t})\n\t\t}else{\n\t\t\treject('Note manquante')\n\t\t}\n\t})\n}\nexport function FavoriteNote (note) {\n\treturn new Promise((resolve, reject) =>{\n\t\tif (note){\n\t\t\tvar noteId = note.id\n\t\t\tvar body = {\n\t\t\t\tisFavorite: note.isFavorite\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\t...globalparams,\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\tmode: 'cors',\n\t\t\t\tbody: JSON.stringify(body)\n\t\t\t}\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfetch(URL + \"notes/\" + noteId, params)\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t\tconsole.log(note)\n\t\t\t\t\t\t// setTimeout(window.location.reload(), 200)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => reject(error))\n\t\t\t})\n\t\t}else{\n\t\t\treject('Note manquante')\n\t\t}\n\t})\n}\n"]},"metadata":{},"sourceType":"module"}